"use strict";!function(p,l,u){var c=l.customize,o=c.JupiterX||{};c.JupiterX=o;var d={stack:[],printedStack:[],addToStack:function(e){(e.type||e.name)&&(this.isFontExists(e.name)||this.stack.push(e))},removeFromStack:function(t){this.clearFontSettings(t),this.stack=_.filter(this.stack,function(e){return e.name!==t})},isFontExists:function(e){return void 0!==_.findWhere(this.stack,{name:e})},addToPrinted:function(e){this.isPrinted(e)||this.printedStack.push(e)},isPrinted:function(e){return _.contains(this.printedStack,e)},getFontValue:function(t){var i="";return _.each(this.stack,function(e){if(e.name===t)return i=e.value?e.value:t}),i},clearFontSettings:function(e){var n=this.getFontValue(e);_.each(l.customize.settings.controls,function(e){if("jupiterx-typography"===e.type){var t=l.customize(e.id).get(),i=_.extend({},l.customize(e.id).get());e.responsive&&i&&_.each(["desktop","tablet","mobile"],function(e){if(_.isObject(i[e])&&i[e].font_family===n){var t=_.extend({},i[e],{font_family:""});i[e]=t}}),!e.responsive&&i&&_.isObject(i)&&i.font_family===n&&(i.font_family=""),_.isEqual(t,i)||l.customize(e.id).set(i)}})}};o.fonts=d,o.PopupSection=c.Section.extend({initialize:function(e,t){this.containerParent="#customize-jupiterx-popup-controls",this.containerPaneParent=".customize-pane-parent",this.tabs={},this.tabsButton=null,this.tabsPane=null,this.activeTab=null,this.popups={},this.popupsContainer=null,this.popupsPane=null,c.Section.prototype.initialize.apply(this,arguments)},onChangeExpanded:function(e,t){var i=this,n=i.container,o=p(document.body),r=this.params;if(c.section.each(function(e){"kirki-popup"===e.params.type&&e.id!==i.id&&e.container.hasClass("open")&&(e.expanded.set(!1),e.container.removeClass("open"))}),o.toggleClass("open-jupiterx-popup-content",e),n.toggleClass("open",e),n.removeClass("busy"),e&&r.preview){var a=_.isObject(r.preview)?r.preview:{};this.redirectSectionPreview(r.id,a)}},redirectSectionPreview:function(e,t){window.jupiterxCustomizer&&l.ajax.post("jupiterx_core_customizer_preview_redirect_url",{_ajax_nonce:window.jupiterxCustomizer.customizer_preview_redirect_url_nonce,section:e,options:JSON.stringify(t)}).done(function(e){e.redirectUrl&&c.previewer.previewUrl.set(e.redirectUrl)}).fail(function(){c.previewer.refresh()})},attachEvents:function(){var t,e=this,i=e.params;t=function(){return e.expanded()?e.collapse():e.expand()},e.container.find(".accordion-section-title, .jupiterx-popup-close").on("click keydown",function(e){c.utils.isKeydownButNotEnterEvent(e)||(e.preventDefault(),t())}),_.isEmpty(i.tabs)||e.tabsEvents(),_.isEmpty(i.popups)||e.childPopupEvents()},tabsEvents:function(){var i=this,n=Object.keys(i.params.tabs);i.tabsPane=i.container.find(".jupiterx-tabs-pane"),i.tabsButton=i.container.find(".jupiterx-tabs-button").each(function(t,e){p(e).on("click",function(e){e.preventDefault(),i.openTab(n[t])})}),i.expanded.bind(function(){i.expanded()&&!i.activeTab&&i.openTab(n[0])}),_.each(n,function(e,t){i.tabs[e]={button:i.tabsButton[t],pane:i.tabsPane[t]}})},openTab:function(e){if(!_.isUndefined(this.tabs[e])){var t=p(this.tabs[e].button),i=p(this.tabs[e].pane);this.expanded()||this.expand(),this.activeTab=e,this.hideTabs(),t.addClass("active"),i.removeClass("hidden"),i.trigger("expanded")}},hideTabs:function(){var e=this.tabsButton.filter(".active"),t=this.tabsPane.filter(":not(.hidden)");e.removeClass("active"),t.addClass("hidden")},childPopupEvents:function(){var i=this,e=Object.keys(i.params.popups);i.popupsContainer=i.container.find(".jupiterx-popup-child"),i.popupsContainer.find(".jupiterx-child-popup-close").on("click",function(e){e.preventDefault(),i.hideChildPopups()}),i.popupsPane=i.container.find(".jupiterx-child-popup"),_.each(e,function(e,t){i.popups[e]={pane:i.popupsPane[t]}})},openChildPopup:function(e){if(!_.isUndefined(this.popups[e])){var t=p(this.popups[e].pane);this.expanded()||this.expand(),this.hideChildPopups(),this.popupsContainer.toggleClass("open",!0),t.addClass("active"),t.trigger("expanded")}},hideChildPopups:function(){this.popupsContainer.removeClass("open"),this.popupsPane.filter(".active").removeClass("active")},isContextuallyActive:function(){var t=this,e=t.controls(),i=0;return c.section.each(function(e){e.params.popup&&e.params.popup===t.id&&e.active()&&e.isContextuallyActive()&&(i+=1)}),e.forEach(function(e){e.active()&&(i+=1)}),0!==i},getContent:function(){var e=this.container,t=e.find(".jupiterx-popup-section:first"),i="sub-"+e.attr("id"),n=i,o=e.attr("aria-owns");return o&&(n=n+" "+o),e.attr("aria-owns",n),t.detach().attr({id:i,class:t.attr("class")+" "+e.attr("class")}).removeClass("accordion-section"),t}}),o.PaneSection=c.Section.extend({default:{popup:"",pane:[]},initialize:function(e,t){var i=t.params,n=i.popup,o=i.pane;n&&!_.isEmpty(o)&&(this.containerParent="#"+o.type+"-"+o.id+"-"+n,c.Section.prototype.initialize.apply(this,arguments))},embed:function(){var t=this,e=t.params.popup,i=t.params.pane;(function(e){c.section(e,function(e){"kirki-popup"===e.params.type&&e.deferred.embedded.done(function(){t.containerParent=c.ensure(t.containerParent),("popup"===i.type?t.containerParent.find(".jupiterx-child-popup-content"):t.containerParent).append(t.contentContainer),t.deferred.embedded.resolve()})})})(e)},onChangeExpanded:function(){},attachEvents:function(){var e=this;e.containerParent.on("expanded",function(){e.expanded()||e.expand()})},getContent:function(){return this.container.find(".jupiterx-controls").detach()}}),o.LinkSection=c.Section.extend({attachEvents:function(){}});var f={"jupiterx-color":{ready:function(){var e=this.container.find(".jupiterx-color-control"),r=_.defaults(this.params,{opacity:!0});_.each(e,function(e){var t,i,n=p(e),o=n.find(".jupiterx-color-control-field");t=function(e){return e.getAlpha()<1?e.toRgbString():e.toHexString()},i=function(e){o.val(_.isNull(e)?"":t(e)).trigger("change")},n.find(".jupiterx-color-control-field").spectrum({containerClassName:"jupiterx-spectrum-container",replacerClassName:"jupiterx-spectrum-replacer",preferredFormat:"hex6",showButtons:!1,showInitial:!0,showInput:!0,showAlpha:r.opacity,allowEmpty:!0,change:i,move:i})})}},"jupiterx-image":{ready:function(){var e=this.container.find(".jupiterx-image-upload-control");_.each(e,function(e){var t=p(e),i=t.find("input[type=hidden]"),n=t.find(".jupiterx-image-upload-control-preview"),o=t.find(".jupiterx-image-upload-control-remove"),r=void 0;t.on("click",function(){r||(r=l.media({title:"Insert Media",multiple:!1})).on("select",function(){var e=r.state().get("selection").first().toJSON();t.addClass("has-image"),n.prop("src",e.url),i.val(e.url),i.trigger("change")}),r.open()}),o.on("click",function(e){e.stopPropagation(),t.removeClass("has-image"),n.prop("src",""),i.val(""),i.trigger("change")})})}},"jupiterx-radio-image":{ready:function(){var e=this.container.find(".jupiterx-radio-image-control");_.each(e,function(e){p(e).find(".pro-preview").on("click",function(){event.preventDefault();var e=p(this),t=l.template("customize-jupiterx-pro-preview-lightbox");p.featherlight({otherClose:".jupiterx-pro-preview-back",variant:"jupiterx-pro-preview-lightbox",html:t({preview:e.data("preview")})})})})}},"jupiterx-multicheck":{ready:function(){var e=this.container.find(".jupiterx-multicheck-control");_.each(e,function(e){var t=p(e),n=t.find("input[type=checkbox]"),o=t.find("input[type=hidden]");t.find("input[type=checkbox]").on("change",function(){var i=[];n.filter(":checked").each(function(e,t){i[e]=p(t).val()}),o.val(i).trigger("change")})})},filterData:function(e){return _.isString(e)?e.split(","):e}},"jupiterx-choose":{ready:function(){if(this.params.multiple){var e=this.container.find(".jupiterx-choose-control");_.each(e,function(e){var t=p(e),n=t.find("input[type=checkbox]"),o=t.find("input[type=hidden]");t.find("input[type=checkbox]").on("change",function(){var i=[];n.filter(":checked").each(function(e,t){i[e]=p(t).val()}),o.val(i).trigger("change")})})}},filterData:function(e){return this.params.multiple&&_.isString(e)?e.split(","):e}},"jupiterx-input":{ready:function(){var e=this.container.find(".jupiterx-input-control");_.each(e,function(e){var t=p(e),i=t.find("input.jupiterx-input-control-input"),n=t.find("input[type=hidden]");i.on("keyup blur change",function(){n.trigger("change")})})}},"jupiterx-font":{ready:function(){var e=this.container.find(".jupiterx-font-control");_.each(e,function(e){p(e).find(".jupiterx-select-field").select2({minimumResultsForSearch:-1,placeholder:"Default",allowClear:!0,containerCssClass:"jupiterx-select2-container",dropdownCssClass:"jupiterx-select2-dropdown jupiterx-select2-dropdown-wrapped",dropdownAutoWidth:!0})})}},"jupiterx-template":{ready:function(){function t(){void 0!==u.elementor&&o.getTemplates({data:{type:e},beforeSend:function(){a.empty(),r.addClass("jupiterx-loading"),a.append("<option value selected>Loading...</option>")},success:function(e){a.empty(),r.removeClass("jupiterx-loading"),r.toggleClass("jupiterx-has-value",!!c),a.append("<option value selected>"+i.placeholder+"</option>"),_.each(e,function(e,t){var i=parseInt(c)===parseInt(t)?"selected":"";a.append("<option "+i+' value="'+t+'">'+e+"</option>")}),a.trigger("change")}})}var i=this.params,e=i.templateType,n=this.container,o=u.elementor,r=n.find(".jupiterx-control"),a=n.find("select"),s=n.find(".jupiterx-edit"),p=n.find(".jupiterx-add"),c=i.value;a.on("change",function(){c=a.val(),function(){var e=!!c;r.toggleClass("jupiterx-has-value",e)}()}),window.jupiterxPremium&&(s.on("click",function(e){e.preventDefault(),void 0!==u.elementor&&a.val()&&u.elementor.openEditor({action:"edit",post:a.val(),beforeClose:function(e){var t=e.elementor.channels.editor.request("status");if(!1===t)l.customize.previewer.refresh();else if(!0===t&&!confirm("The changes you made will be lost if you leave this page."))return!1}})}),p.on("click",function(e){e.preventDefault(),void 0!==u.elementor&&u.elementor.openEditor({action:"new",type:i.templateType,beforeClose:function(e){c=e.elementor.config.document.id,a.val(e.elementor.config.document.id),t()}})})),t()}}};o.components=f;function e(e){if(!_.isUndefined(f[e]))return f[e]}function t(e){if(!_.isUndefined(i[e]))return i[e]}var i={"jupiterx-child-popup":{ready:function(){var t=this,i=t.params,e=void 0,n=void 0;_.isEmpty(i.bindItems)||(n=function(e){if(_.isArray(e)){var r=e;t.container.find(".jupiterx-child-popup-control-item").each(function(e,t){var i=p(t),n=i.data("value"),o=!_.contains(r,n);i.toggleClass("hidden",o)})}},e=l.customize(i.bindItems).get(),l.customize(i.bindItems).bind(n),n(e)),i.sortable&&t.container.find(".jupiterx-child-popup-control-items").sortable({stop:function(){var i=[];t.container.find(".jupiterx-child-popup-control-item").each(function(e,t){i.push(p(t).data("value"))}),t.setting.set(i)}}),_.isEmpty(i.target)||t.container.find(".jupiterx-button").on("click",function(e){e.preventDefault();var t=p(this).data("id");l.customize.section(i.target,function(e){e.openChildPopup(t)})})}},"jupiterx-popup":{ready:function(){var t=this.params;this.container.find(".jupiterx-popup-control-button").on("click",function(e){e.preventDefault(),l.customize.section(t.target,function(e){e.expand()})})}},"jupiterx-fonts":{initialize:function(e,t){var i,n=this;t.params.subsets={latin:"latin","latin-ext":"latin-ext","cyrillic-ext":"cyrillic-ext","greek-ext":"greek-ext",greek:"greek",vietnamese:"vietnamese",cyrillic:"cyrillic"},o.Control.prototype.initialize.call(n,e,t),i=n.setting.get(),_.each(i,function(e){n.loadWebFont(e,null,n),d.addToStack(e)})},ready:function(){var e;this.renderFontSelector(),e=this.setting.get(),_.each(e,this.renderFontPreview.bind(this))},renderFontPreview:function(e){var t=void 0,i=void 0;t=this.container.find(".jupiterx-fonts-control"),i=l.template("customize-jupiterx-fonts-control-preview"),t.append(i(e))},renderFontSelector:function(){var e=void 0,t=void 0;e=this.container.find(".jupiterx-fonts-control"),t=l.template("customize-jupiterx-fonts-control-selector"),e.prepend(t(this.params))},loadWebFont:function(e,t,i){var n={},o=void 0;if(e.type||e.name)if(d.isPrinted(e.name))_.isFunction(t)&&t();else{if("100,200,300,400,500,600,700,800,900,100italic,200italic,300italic,400italic,500italic,600italic,700italic,800italic,900italic","google"===e.type&&(n.google={families:[e.name+":100,200,300,400,500,600,700,800,900,100italic,200italic,300italic,400italic,500italic,600italic,700italic,800italic,900italic"]},e.subsets&&(n.google.families[0]+=":"+e.subsets.join(","))),"adobe"===e.type&&i){var r=i.params.apiSource.adobe;r&&(n.typekit={id:r})}(o=p("#customize-preview iframe")).attr("name")&&WebFont.load(_.extend(_.clone(n),{context:frames[o.attr("name")]})),t&&(n.active=t,n.inactive=t,n.fontactive=t,n.fontinactive=t),WebFont.load(n),d.addToPrinted(e.name)}},actuallyReady:function(){this.previewEvents(),this.fontSelectorEvents()},previewEvents:function(){var r=this,e=r.container,t={};r.previewElements={$register:e.find(".jupiterx-fonts-control-register")},t=r.previewElements,e.on("click",".jupiterx-fonts-control-preview-remove",function(e){if(e.preventDefault(),confirm("Are you sure you want to remove this font?")){var t,i,n,o=p(e.currentTarget).parent(".jupiterx-fonts-control-preview");t=o.data("fontFamily"),n=_.clone(r.setting.get()),i=_.filter(n,function(e){return e.name!==t}),r.setting.set(i),d.removeFromStack(t),o.remove()}}),t.$register.on("click",function(e){e.preventDefault(),r.selectorElements.$wrapper.addClass("open"),r.selectorElements.$fontFamilies.val(null).trigger("change"),r.selectorElements.$textSample.removeProp("style")})},fontSelectorEvents:function(){var a,s=this,e=s.container,u={};s.selectorElements={$wrapper:e.find(".jupiterx-fonts-control-popup"),$textSample:e.find(".jupiterx-fonts-control-selector-sample"),$fontFamiliesWrapper:e.find(".jupiterx-fonts-control-selector-families"),$fontFamilies:e.find(".jupiterx-fonts-control-selector-families select"),$filtersWrapper:e.find(".jupiterx-fonts-control-selector-filters"),$filters:e.find(".jupiterx-fonts-control-selector-filters select"),$subsets:e.find(".jupiterx-fonts-control-selector-subsets")},u=s.selectorElements,a=function(){u.$wrapper.removeClass("open"),u.$fontFamilies.val(null).trigger("change"),u.$textSample.removeProp("style"),_.each(s.params.subsets,function(e,t){p("#jupiterx_fonts_subset_"+t).prop("checked",!1)}),u.$subsets.hide()},p.fn.select2.amd.require(["select2/selection/multiple","select2/selection/search","select2/selection/eventRelay","select2/dropdown","select2/dropdown/attachBody","select2/dropdown/closeOnSelect","select2/compat/dropdownCss","select2/compat/containerCss","select2/utils"],function(e,t,i,n,o,r,a,s,p){var c=void 0,l=void 0;c=p.Decorate(e,t),c=p.Decorate(c,i),l=p.Decorate(n,a),l=p.Decorate(l,r),l=p.Decorate(l,o),u.$fontFamilies.select2({maximumResultsForSearch:5,containerCssClass:"jupiterx-select2-container jupiterx-select2-autocomplete",selectionAdapter:p.Decorate(c,s),dropdownCssClass:"jupiterx-select2-dropdown jupiterx-select2-autocomplete",dropdownParent:u.$fontFamiliesWrapper.find(".jupiterx-select-control"),dropdownAdapter:l,width:"100%"})}),u.$fontFamilies.on("select2:select",function(e){var t,i=e.params.data,n={name:i.text,type:i.element.dataset.type,value:i.element.value};"google"===n.type?u.$subsets.show():u.$subsets.hide(),u.$textSample.css("opacity","0.65"),t=function(){u.$textSample.css({opacity:1,fontFamily:n.value})},"system"!==n.type?s.loadWebFont(n,t,s):t()}),u.$filters.select2({minimumResultsForSearch:1/0,containerCssClass:"jupiterx-select2-container",dropdownCssClass:"jupiterx-select2-dropdown jupiterx-select2-dropdown-wrapped",dropdownAutoWidth:!0,width:"100%",templateResult:function(e){return p("<span>"+e.text+"</span>")}}),u.$filters.on("change",function(e){var r=p(e.target).find(":selected").val(),t=u.$fontFamilies.select2("data");t&&0<t.length&&(!r||"google"===r)?u.$subsets.show():u.$subsets.hide(),u.$fontFamilies.html(null),_.each(s.params.fontFamilies,function(e,t){var i=e.type||e,n=e.value||t;if(i===r||""===r){var o=p("<option></option>",{"data-type":i,html:t,value:n});u.$fontFamilies.append(o)}}),u.$fontFamilies.val(null).trigger("change")}),u.$wrapper.on("click",".jupiterx-fonts-control-selector-submit",function(e){e.preventDefault();var t,i,n=void 0,o=void 0;if(t=u.$fontFamilies.select2("data"),!_.isEmpty(t)&&t[0].text){if("google"===(n={name:t[0].text,type:t[0].element.dataset.type,value:t[0].element.value}).type){var r=[];_.each(s.params.subsets,function(e,t){p("#jupiterx_fonts_subset_"+t).prop("checked")&&r.push(e)}),n.subsets=r}o=_.clone(s.setting.get()),i=_.filter(o,function(e){return e.name===n.name}),_.isEmpty(i)&&(o.push(n),s.renderFontPreview(n),s.setting.set(o),d.addToStack(n)),a()}else a()}),u.$wrapper.on("click",".jupiterx-fonts-control-selector-cancel",function(e){e.preventDefault(),a()}),a()}}};o.Control=c.Control.extend({types:{JUPITERX_SELECT:"jupiterx-select",JUPITERX_EXCEPTIONS:"jupiterx-exceptions",JUPITERX_TEMPLATE:"jupiterx-template"},defaultActiveArguments:{duration:0,completeCallback:p.noop},initialize:function(e,t){var i=this;c.Control.prototype.initialize.call(i,e,t),i.deferred.embedded.done(function(){i.responsiveEvents(),i.previewRedirectionEvents(),i.unitsEvents(),i.unitInputValidate(),i.stepizeInputs(),i.actuallyReady()})},embed:function(){var t=this,e=t.section();e&&l.customize.section(e,function(e){e.expanded.bind(function(e){e&&t.actuallyEmbed()})})},actuallyEmbed:function(){"resolved"!==this.deferred.embedded.state()&&(this.renderContent(),this.deferred.embedded.resolve())},linkElements:function(){var n=this,o=void 0,r={},a=void 0;(o=n.container.find("[data-customize-setting-link], [data-setting-property-link]")).each(function(){var e,i=p(this),t=void 0;if(!i.data("customizeSettingLinked")){if(i.data("customizeSettingLinked",!0),i.is(":radio")){if(t=i.prop("name"),r[t])return;r[t]=!0,i=o.filter('[name="'+t+'"]')}if(e=i.data("settingPropertyLink"))return(a=new c.Element(i)).bind(function(e,t){return n.savePropertyValue(e,t,i)}),n.elements[e]=[],void n.elements[e].push(a);(a=new c.Element(i)).bind(function(e,t){return n.saveValue(e,t,i)}),n.elements.push(a)}})},responsiveEvents:function(){this.container.find(".jupiterx-responsive-switcher a").on("click",function(e){c.previewedDevice.set(p(e.currentTarget).data("device"))})},previewRedirectionEvents:function(){var i=this;p(document).on("change",i.selector+" .jupiterx-renew-preview",function(e){var t={};t[e.target.getAttribute("data-customize-setting-link")]=e.target.value,i.params.type===i.types.JUPITERX_EXCEPTIONS&&(t[i.id]=i.setting()),i.redirectOptionPreview(i.params.section,t)})},redirectOptionPreview:function(e,t){window.jupiterxCustomizer&&l.ajax.post("jupiterx_core_customizer_preview_redirect_url",{_ajax_nonce:window.jupiterxCustomizer.customizer_preview_redirect_url_nonce,section:e,options:JSON.stringify(t)}).done(function(e){e.redirectUrl&&(c.previewer.previewUrl.get()!==e.redirectUrl?c.previewer.previewUrl.set(e.redirectUrl):c.previewer.refresh())}).fail(function(){c.previewer.refresh()})},unitsEvents:function(){var t=this.container.find(".jupiterx-control-units-container");p(document.body).on("click",function(e){e.target.closest(".jupiterx-control-unit-selector")||t.find(".jupiterx-control-unit-selector").removeClass("open")}),_.each(t,function(e){var n=p(e),o=n.find("input[type=hidden]"),r=n.find(".jupiterx-control-unit-selector"),a=r.find(".selected-unit");a[0].classList.contains("disabled")||r.on("click","li",function(e){if(r.toggleClass("open"),!e.target.classList.contains("selected-unit")){var t=e.target.innerText.toLowerCase();a.text(t),o.val(t).trigger("change");var i=n.parents(".jupiterx-control").find(r.data("inputs"));"px"===t?i.attr("step",1):i.attr("step",.1),i.trigger("stepper.destroy",[t]),i.stepper({decimals:1,min:0,max:1e3})}})})},unitInputValidate:function(){var e=this.container.find(".jupiterx-input-control:not(.jupiterx-text-control)");_.each(e,function(e){var t=p(e),i=t.find("input[type=text]"),n=t.find(".jupiterx-control-units-container").find(".selected-unit"),o=n.text();i.on("keyup focus blur",function(){var e=i.val();!isNaN(parseFloat(e))&&isFinite(e)||_.isEmpty(e)?"-"===n.text()&&n.text(o):n.text("-")})})},stepizeInputs:function(){var e=[];e.push(this.container.find("input.jupiterx-input-control-input")),e.push(this.container.filter(".customize-control-jupiterx-box-model").find("input.jupiterx-box-model-control-input")),_.each(e,function(e){e.stepper({decimals:1,min:0,max:1e3})})},saveValue:function(e,t,i){var n,o=this,r=void 0,a=void 0;if(e!==t){if(_.isUndefined(o.filterData)||(e=o.filterData(e)),r=e,n=i.data("settingViewportLink"))return a=o.setting.get(),(r=_.extend({},a))[n]=e,void o.setting.set(r);o.setting.set(r)}},savePropertyValue:function(e,t,i){var n,o,r,a=this,s=void 0;if(e!==t){if(_.isUndefined(a.filterData)||(e=a.filterData(e)),n=i.data("settingViewportLink"),o=i.data("settingPropertyLink"),r=a.setting.get(),s=_.extend({},r),n)return s[n]=_.extend({},r[n]),s[n][o]=e,void a.setting.set(s);s[o]=e,a.setting.set(s)}},actuallyReady:function(){}}),o.TemplateControl=o.Control.extend({addControl:function(e,t){var i,n=void 0,o=void 0,r=void 0,a=void 0;if(i="customize-control-"+e.type+"-content",document.getElementById("tmpl-"+i))return t=t||this.container.find(".jupiterx-group-controls"),(e=_.defaults(e,{column:12,cssClass:""})).link='data-customize-setting-link="'+e.id+'" '+(e.link?e.link:""),_.isObject(e.inputAttrs)&&(e.inputAttrs=_.map(e.inputAttrs,function(e,t){return t+'="'+e+'"'}).join(" ")),_.isObject(e.controlAttrs)&&(e.controlAttrs=_.map(e.controlAttrs,function(e,t){return t+'="'+e+'"'}).join(" ")),o=_.compact(["jupiterx-col-"+e.column,"customize-control customize-control-"+e.type,e.cssClass,e.property?this.params.type+"-control-"+e.property.replace(/_/g,"-"):"",e.responsive?"customize-control-responsive":""]),r=p("<li></li>",{class:o.join(" ")}),n=l.template(i),r.append(n(e)),t.append(r),this.linkElements(e,r),(a=f[e.type])&&a.ready&&a.ready.call({container:r,params:e}),r},linkElements:function(n,e){if(!_.isEmpty(n)&&!_.isEmpty(e)){var o,r=this,t=void 0,a={},s=void 0;t=e.find("[data-customize-setting-link], [data-setting-property-link]"),o=n.property,r.elements[o]=[],t.each(function(){var i=p(this),e=void 0;if(!i.data("customizeSettingLinked")){if(i.data("customizeSettingLinked",!0),i.is(":radio")){if(e=i.prop("name"),a[e])return;a[e]=!0,i=t.filter('[name="'+e+'"]')}s=new c.Element(i),r.elements[o].push(s),s.bind(function(e,t){return r.saveValue(e,t,o,i,n)})}})}},saveValue:function(e,t,i,n,o){var r,a=f[o.type],s=i,p=this.params.responsive,c=void 0,l=void 0;a&&a.filterData&&(e=a.filterData.call({params:o},e)),(r=n.data("settingPropertyLink"))&&(s=s+"."+r),c=n.data("settingViewportLink"),(c=p&&!c?"desktop":c)&&(s=c+"."+s),l=function e(t,i,n){var o=t.split(".");if(n=_.extend({},n),1===o.length)return n[o[0]]=i,n;var r=o.shift();return n[r]=e(o.join("."),i,n[r]),n}(s,e,l=_.extend({},this.setting.get())),this.setting.set(l)}}),o.GroupControl=o.TemplateControl.extend({initialize:function(e,t){o.Control.prototype.initialize.call(this,e,t)},ready:function(){var t=this,e=t.params;_.each(e.fields,function(e){t.addControl(e)})}}),o.ColorControl=o.Control.extend(e("jupiterx-color")),o.ImageControl=o.Control.extend(e("jupiterx-image")),o.RadioImageControl=o.Control.extend(e("jupiterx-radio-image")),o.MulticheckControl=o.Control.extend(e("jupiterx-multicheck")),o.ChooseControl=o.Control.extend(e("jupiterx-choose")),o.InputControl=o.Control.extend(e("jupiterx-input")),o.FontControl=o.Control.extend(e("jupiterx-font")),o.ChildPopupControl=o.Control.extend(t("jupiterx-child-popup")),o.PopupControl=o.Control.extend(t("jupiterx-popup")),o.FontsControl=o.Control.extend(t("jupiterx-fonts")),o.Template=o.Control.extend(e("jupiterx-template")),o.ExceptionsControl=o.TemplateControl.extend({initialize:function(e,t){this.controls={},o.Control.prototype.initialize.call(this,e,t)},ready:function(){var i=this,n=i.params,e=i.setting.get();_.each(e,function(e,t){n.fields[t]&&i.addException({id:t,text:n.fields[t].label,value:e})})},actuallyReady:function(){var n,o,r=this,t=(_.keys(r.params.fields),r.params.fields),e=r.container,i=e.find(".jupiterx-exceptions-control-add"),a=i.find(".jupiterx-select-control-field"),s=void 0;n=function(e){a.find("option[value="+e+"]").remove(),s()},o=function(e){t[e]&&(a.append(new Option(t[e].label,e,!1,!1)),s())},s=function(){var e=a.find("option");i.toggle(0<e.length)},_.each(_.keys(r.setting.get()),function(e){n(e)}),a.select2({minimumResultsForSearch:-1,placeholder:"Add New Exception",allowClear:!0,containerCssClass:"jupiterx-select2-container",dropdownCssClass:"jupiterx-select2-dropdown",width:"100%"}).on("select2:select",function(e){e.preventDefault();var t=e.params.data,i=r.setting.get();t&&t.id&&!i[t.id]&&(r.exceptionInitialData(t),r.addException(t),n(t.id)),a.val("").change()}),i.find(".jupiterx-button").click(function(e){e.preventDefault(),a.select2("open")}),e.on("click",".jupiterx-exceptions-control-remove",function(e){if(e.preventDefault(),confirm("Are you sure you want to remove this exception?")){var t=p(e.currentTarget),i=t.data("id"),n=r.setting.get();i&&n[i]&&(r.removeException(i),t.closest(".jupiterx-exceptions-control-group").remove(),o(i)),a.val("").change()}}),a.val("").change(),r.setting.bind("change",function(e,t){if(e=e||{},t=t||{},Object.keys(e).length!==Object.keys(t).length){var i={};i[r.id]=JSON.stringify(Object.keys(e)),r.redirectOptionPreview(r.params.section,i)}})},addException:function(i){var n=this,e=n.params,t=n.container.find(".jupiterx-exceptions-control-items"),o=l.template("customize-jupiterx-exceptions-control-group"),r=p(o(i)),a=r.find(".jupiterx-group-controls");n.controls[i.id]={},_.each(e.fields[i.id].options,function(e,t){e.property=t,e.value=i.value?i.value[t]:e.default,e.id=n.id+"_"+i.id+"_"+t,e.link='data-setting-property-link="'+i.id+"."+t+'"',n.controls[i.id][t]=n.addControl(e,a)}),"jupiterx_title_bar_exceptions"===n.id&&(n.titleBarEvents(i.id),n.titleBarToggleFields(i.id)),t.append(r)},exceptionInitialData:function(e){var t=this.params,i=e.id,n=void 0;(n=_.extend({},this.setting.get()))[i]={},_.each(t.fields[i].options,function(e,t){n[i][t]=e.default}),this.setting.set(n)},removeException:function(e){var t=void 0;delete(t=_.extend({},this.setting.get()))[e],this.setting.set(t)},titleBarEvents:function(e){var t=this,i=t.controls;i[e]&&i[e].type&&i[e].type.find("input[type=radio]").on("change",function(){t.titleBarToggleFields(e)})},titleBarToggleFields:function(e){var t=this.setting.get();if(t[e]){var i=this.controls[e],n="_custom"===t[e].type,o=function(e,t){i[e]&&i[e].toggleClass("hidden",t)};o("full_width",n),o("elements",n),o("title_tag",n),o("pro_box",!n),o("template",!n)}},saveValue:function(e,t,i,n,o){var r,a=this,s=f[o.type];s&&s.filterData&&(e=s.filterData.call({params:o},e));if(r=function e(t,i,n){var o=t.split(".");if(n=_.extend({},n),1===o.length)return n[o[0]]=i,n;var r=o.shift();return n[r]=e(o.join("."),i,n[r]),n}(n.data("settingPropertyLink"),e,a.setting.get()),a.setting.set(r),o.type!==a.types.JUPITERX_SELECT){var p={};p[o.id]=e,p[a.id]=a.setting(),a.redirectOptionPreview(a.params.section,p)}}}),o.BackgroundGroupControl=o.GroupControl.extend({actuallyReady:function(){var t,e=this,i=e.setting.get(),n=e.container.find(".for-classic"),o=e.container.find(".for-gradient"),r=e.container.find(".for-video"),a=_.isUndefined(i.type)?"classic":i.type;e.params.responsive&&(a=_.isUndefined(i.desktop)||_.isUndefined(i.desktop.type)?"classic":i.desktop.type),t=function(e){e&&(n.toggleClass("hidden","classic"!==e),o.toggleClass("hidden","gradient"!==e),r.toggleClass("hidden","video"!==e))},_.each(e.elements.type,function(e){e.bind(t)}),t(a)}}),p.extend(c.sectionConstructor,{"kirki-popup":o.PopupSection,"kirki-pane":o.PaneSection,"kirki-jupiterx-link":o.LinkSection}),p.extend(c.controlConstructor,{"jupiterx-text":o.Control,"jupiterx-input":o.InputControl,"jupiterx-textarea":o.Control,"jupiterx-select":o.Control,"jupiterx-toggle":o.Control,"jupiterx-choose":o.ChooseControl,"jupiterx-divider":o.Control,"jupiterx-label":o.Control,"jupiterx-position":o.Control,"jupiterx-radio-image":o.RadioImageControl,"jupiterx-multicheck":o.MulticheckControl,"jupiterx-color":o.ColorControl,"jupiterx-image":o.ImageControl,"jupiterx-child-popup":o.ChildPopupControl,"jupiterx-popup":o.PopupControl,"jupiterx-box-model":o.Control,"jupiterx-fonts":o.FontsControl,"jupiterx-font":o.FontControl,"jupiterx-exceptions":o.ExceptionsControl,"jupiterx-template":o.Template,"jupiterx-pro-box":o.Control}),p.extend(c.controlConstructor,{"jupiterx-box-shadow":o.GroupControl,"jupiterx-typography":o.GroupControl,"jupiterx-border":o.GroupControl,"jupiterx-background":o.BackgroundGroupControl}),c.bind("ready",function(){c.panel("woocommerce")&&c.panel("woocommerce").priority(285),c.section("custom_css").priority(1e3)}),c.bind("pane-contents-reflowed",function(){c.section.each(function(e){("kirki-pane"===e.params.type||"kirki-popup"===e.params.type&&e.params.hidden)&&e.headContainer.remove()})});var n=p("#customize-controls"),r=l.template("customize-jupiterx-popup-content");n.append(r()),p(".jupiterx-popup").draggable({containment:"body",handle:".jupiterx-popup-header, .jupiterx-child-popup-header"})}(jQuery,wp,jupiterx);